
module NiceCorollaries {o e} (C : Carpet {o} {â„“} {e})  where

  open UnivalentCarpet2 C
  open Monad truncMonad
  twoFactorizationLemma : {i j k : Carrier} â†’ (f : i â‰¤ j) â†’ (g : j â‰¤ k) â†’ (A : SubPtd (ğ• i)) â†’  f â†“* A âŠ‚ g â†‘* pushforward ((Ï• g) âŠ™âˆ˜ (Ï• f)) A
  twoFactorizationLemma {i = i} {j = j} {k = k} f g A = ezFactor {ğ”¸ = ğ• i} {ğ”¹ = ğ• j} {â„‚ = ğ• k} A
  module Adj {i j : Carrier} (g : i â‰¤ j) (A : SubPtd (ğ• i))  where
    open ARG
    unit : (i , A) ==> (i ,  g â†‘* g â†“* A )
    unit =  IncUncert'' (
      ROUNDTRIP
            begin
      (i , A)
      âˆ¼âŸ¨ FWD' g âŸ©
      (j , g â†“* A)
      âˆ¼âŸ¨ PB g (functPush (Ï• g) {A = A} SthâŠ‚Full) âŸ©
      (i , g â†‘* g â†“* A)
      âˆ âˆ¶ refl=>'
      MOVECHILDREN re < introâŠ‚ ( funcPull  (Ï• g) {A = g â†“* A} 0âŠ‚Sth) >) (Râˆ¨ re)
      {--
 âˆ·  âˆ¶  refl=>'
--}
    adjunction : (B : SubPtd (ğ• j)) â†’ g â†“* A âŠ‚ B â†’ A âŠ‚ g â†‘* B
    adjunction B info  =  transâŠ‚ (toâŠ‚' unit) (funcPull (Ï• g) info) 
  twoFactorizationLemma' : {i j k : Carrier} â†’ (f : i â‰¤ j) â†’ (g : j â‰¤ k) â†’ (A : SubPtd (ğ• i)) â†’  f â†“* A âŠ‚ g â†‘* (f â–  g) â†“* A
  twoFactorizationLemma' f g A = subst (Î» y â†’ f â†“* A âŠ‚ g â†‘* y) (leftFunc {A = A} f g) (toâŠ‚' (Adj.unit g _))
